{% extends 'Teacher/base.html' %}
{% load static %}

{% block title %}My Assignments{% endblock %}

{% block content %}
    <div class="max-w-5xl mx-auto">
        <!-- Header and Create Button -->
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6">
            <h2 class="text-3xl font-bold text-gray-900">My Assignments</h2>
            <a href="{% url 'assignment_create' %}" class="btn-primary font-semibold py-2 px-4 flex items-center gap-2 mt-4 sm:mt-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Create New Assignment
            </a>
        </div>

        <!-- Main Assignment List Card -->
        <div class="card p-6 sm:p-8">
            <div class="space-y-4">
                {% for assignment in assignments %}
                <a href="{% url 'assignment_detail' assignment.id %}" class="block bg-gray-50 p-4 rounded-md border border-gray-200 hover:border-blue-500 transition-colors">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center">
                        <!-- Left Side: Title and Details -->
                        <div class="mb-3 sm:mb-0">
                            <h4 class="text-lg font-bold text-gray-900">{{ assignment.title }}</h4>
                            <div class="flex items-center space-x-4 mt-1 text-sm text-gray-500">
                                <span>
                                    Due: {{ assignment.due_date|date:"M d, Y" }}
                                </span>
                                <span class="hidden sm:inline">&bull;</span>
                                <span>
                                    {{ assignment.submissions.count }} Submission{{ assignment.submissions.count|pluralize }}
                                </span>
                            </div>
                        </div>
                        
                        <!-- Right Side: Status and Action -->
                        <div class="flex items-center gap-4 w-full sm:w-auto">
                            {% if assignment.status == 'active' %}
                                <span class="status-pill status-active w-full sm:w-auto text-center">Active</span>
                            {% elif assignment.status == 'draft' %}
                                <span class="status-pill status-draft w-full sm:w-auto text-center">Draft</span>
                            {% else %}
                                <span class="status-pill status-expired w-full sm:w-auto text-center">Expired</span>
                            {% endif %}
                            <button class="btn-secondary py-2 px-4 w-full sm:w-auto">View Details</button>
                        </div>
                    </div>
                </a>
                {% empty %}
                <!-- Message shown if there are no assignments -->
                <div class="text-center py-12 text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <h3 class="mt-2 text-lg font-medium text-gray-800">No Assignments Found</h3>
                    <p class="mt-1 text-sm text-gray-500">
                      Get started by creating your first assignment.
                    </p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
